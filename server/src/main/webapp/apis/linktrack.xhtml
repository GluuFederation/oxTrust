<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.org/schema/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:ox="http://java.sun.com/jsf/composite/ox"
    template="/WEB-INF/incl/layout/template.xhtml">

    <ui:define name="body">
		<h:form id="waitForm" >
			<rich:popupPanel modal="true" id="waitPanel" autosized="true" domElementAttachment="form" >
			<h:outputText value="#{msg['linktrack.verificationInProgress']}"/>
			</rich:popupPanel>
		</h:form>
        <h:panelGroup layout="block" id="formArea">
            <ui:param name="_appliance" value="#{applianceService.appliance}" />
            <h:form>
	            <h:panelGrid columns="1" width="100%" border="0" cellpadding="0" cellspacing="0" id="statusTable">
	                <ox:decorate template="/WEB-INF/incl/layout/view.xhtml" label="#{msg['linktrack.configureLinktrackAPI']}">
	                    <h:selectBooleanCheckbox value="#{apisConfigurationAction.enableLinktrack}">
		                    <a4j:ajax  event="click"  render="linktrackConfig, updateLinktrack" />                     
		                </h:selectBooleanCheckbox>
	                </ox:decorate>
	                <h:panelGroup id="linktrackConfig" >
		                <h:panelGrid rendered="#{apisConfigurationAction.enableLinktrack}" width="100%" > 
			                <ox:decorate label="#{msg['linktrack.linktrackAPILogin']}">
			                    <h:inputText id="username"
			                              value="#{apisConfigurationAction.linktrackLogin}">
			                              <a4j:ajax event="keyup" render="updateLinktrack" listener="#{apisConfigurationAction.invalidate}"/>
			                    </h:inputText> 
			                </ox:decorate>
			                <ox:decorate label="#{msg['linktrack.linktrackAPIPassword']}">
			                    <h:inputText id="username"
			                              value="#{apisConfigurationAction.linktrackPassword}">
			                              <a4j:ajax  event="keyup"  render="updateLinktrack" listener="#{apisConfigurationAction.invalidate}"/>
			                    </h:inputText> 
			                </ox:decorate>
			                <a4j:commandButton value="#{msg['linktrack.verify']}"
				            	action="#{apisConfigurationAction.verify}" 
				                render="updateLinktrack" 
				                execute="@form"
				                onclick="#{rich:component('waitPanel')}.show();"
				                oncomplete="#{rich:component('waitPanel')}.hide();" >	
				            </a4j:commandButton>
			                <div id="commandButtons" >
				      

			                </div>
		                </h:panelGrid>
	                </h:panelGroup>
	                <a4j:outputPanel id="updateLinktrack">
				        <h:commandButton value="#{msg['linktrack.save']}" action="#{apisConfigurationAction.save}" disabled="#{apisConfigurationAction.enableLinktrack and not apisConfigurationAction.linktrackVerified}"/>
				    </a4j:outputPanel> 
	            </h:panelGrid>
            </h:form>
        </h:panelGroup>
    </ui:define>

</ui:composition>